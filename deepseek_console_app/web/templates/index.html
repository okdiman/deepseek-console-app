<!doctype html>
<html lang="ru">

<head>
  <meta charset="utf-8" />
  <title>DeepSeek Web Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css?v=2" />
</head>

<body>
  <div class="layout">
    <div class="sidebar">
      <div class="sidebar-header">
        <h2>Sessions</h2>
        <button id="newSessionBtn" class="new-btn" title="New Session">＋</button>
      </div>
      <div id="sessionList" class="session-list">
        <!-- Sessions populated via JS -->
      </div>
    </div>
    <div class="container main-content">
      <div class="toolbar">
        <h1>DeepSeek Web Chat (Streaming)</h1>
        <button id="clearBtn" type="button">Clear</button>
      </div>
      <div id="chat">
        {{ rendered_messages|safe }}
      </div>
      <div class="stats" id="stats"></div>
      <div class="footer">
        <form id="chatForm">
          <textarea id="message" placeholder="Напиши сообщение..."></textarea>
          <select id="strategySelect">
            <option value="default">Default</option>
            <option value="window">Sliding Window</option>
            <option value="facts">Sticky Facts</option>
            <option value="branching">Branching</option>
          </select>
          <select id="agentSelect">
            {% for id, name in agents.items() %}
            <option value="{{ id }}" {% if id==default_agent_id %}selected{% endif %}>{{ name }}</option>
            {% endfor %}
          </select>
          <button type="submit">Send</button>
        </form>
        <div class="status" id="status"></div>
      </div>
    </div>
  </div>

  <script src="/static/app.js?v=3"></script>
</body>

</html>